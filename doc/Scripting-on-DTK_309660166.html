<!DOCTYPE html>
<html>
    <head>
        <title>DTK: Scripting on DTK</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">DTK</a></span>
                            </li>
                                                    <li>
                                <span><a href="Deployment-Tool-Kit_309660126.html">Deployment Tool Kit</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            DTK : Scripting on DTK
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div id="main-content" class="wiki-content group">
                    <p><br/></p><p>DTK is able to execute scripts, this makes it a very powerful tool for the industrialization of processes. DTK interprets its own scripting language.<br/><br/></p><ul><li><strong>Each line can contain one instruction.</strong><br/><br/></li><li>The <strong>SOURCE</strong> and <strong>TARGET</strong> keywords refer to the sandboxes you have selected in the fields in the Retrieve and Deploy windows. There are instructions that are oriented to an environment, if you put SOURCE in the instruction, it will be to the environment that is selected in the Source field.<br/><br/></li><li>All fields &lt;file_name&gt; or &lt;file&gt; will search in the current workspace. If the file is inside a folder, this field accepts route input: Example: <em>CustomSettingsMigration\CustomsettingsMigration.csv</em><br/><br/></li><li>If the script is going to be included as Pre Script or Post Script and used in a Deploy from GIT then it can reference the repository root folder with <strong>{gitroot}. </strong>Example: <em>{gitroot}CustomSettingsMigration\CustomsettingsMigration.csv</em><br/><br/></li><li>Some instrucctions needs keywords along them so they can be identified by DTK this works will be in CAPS. We will name the variables as &lt;variable_name&gt; so you can distinguish them from keywords.<br/><br/></li><li>Script lines can be commented using &quot;--&quot; and DTK will ignore them</li></ul><p><br/></p><p><br/></p><p>The available instructions are the following:</p><h2 id="ScriptingonDTK-1.Fileprocessing:"><strong>1. File processing:</strong></h2><h2 id="ScriptingonDTK-REPLACE:"><br/><strong>REPLACE:</strong></h2><p>The purpose of this instruction is to replace information from column &lt;replace_column&gt; of &lt;replace_file&gt; with information from column &lt;replace_column&gt; of &lt;target_compare_file&gt;, but only when &lt;replace column&gt; of &lt;replace_file&gt; and &lt;source_compare_file&gt; match, and &lt;match_column&gt; of &lt;source_compare_file&gt; and &lt;target_compare_file&gt; match as well.</p><p><br/></p><div class="code panel pdl" style="border-width: 1px;"><div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;"><b>Replace structure</b></div><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">FILE|REPLACE|&lt;replace_file&gt;|&lt;source_compare_file|&lt;target_compare_file&gt;|&lt;replace_column&gt;|&lt;match_column&gt;</pre>
</div></div><p><br/></p><p><br/></p><div class="confluence-information-macro confluence-information-macro-information"><p class="title">Tip</p><span class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>This instruction also accepts multiple &lt;match_column&gt; parameter with &quot;+&quot;, for example:</p><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col/></colgroup><tbody><tr><td class="confluenceTd"><p>FILE|REPLACE|&lt;replace_file&gt;|&lt;source_compare_file|&lt;target_compare_file&gt;|&lt;replace_column&gt;|<strong><span style="color: rgb(255,0,0);">Id+Name</span></strong></p></td></tr></tbody></table></div><p>Being that &lt;match_column&gt; a concatenation of those 2 columns.</p></div></div><p><br/></p><p>It may seem a little complex, but for that we will give an applied example:</p><p><br/></p><p><em>The development team has finished and we want to deploy the improvements we have in the Config environment to the QA environment so that the QA team can test them.</em></p><p><em>The changes are Custom Settings so we need to export the Custom Settings from Config and Import them into QA.</em></p><p><em>We can see that some Custom Settings refer to &quot;Ids&quot; and in Salesforce each environment has its own Ids. For config Custom Settings to work in QA we have to change those Config references to QA references.</em></p><p><em><br/></em></p><div class="table-wrap"><table class="relative-table wrapped confluenceTable" style="width: 60.8256%;"><colgroup><col style="width: 24.0681%;"/><col style="width: 13.3776%;"/><col style="width: 6.46018%;"/><col style="width: 7.56235%;"/><col style="width: 2.34245%;"/><col style="width: 8.61625%;"/><col style="width: 13.3776%;"/><col style="width: 2.34245%;"/><col style="width: 8.61625%;"/><col style="width: 13.218%;"/></colgroup><tbody><tr><td class="highlight-red confluenceTd" colspan="4" data-highlight-colour="red" style="text-align: center;"><p title="">&lt;replace_file&gt;</p><p title="">CustomSettingsMigration.csv</p><p title="">(Custom Setting extraction from Config)</p></td><td colspan="1" style="text-align: center;" class="confluenceTd"><br/></td><td class="highlight-blue confluenceTd" colspan="2" data-highlight-colour="blue" style="text-align: center;"><p>&lt;source_compare_file&gt;</p><p>ProfileSource.csv</p><p>(Profile Object extraction from CONFIG)</p></td><td colspan="1" style="text-align: center;" class="confluenceTd"><br/></td><td class="highlight-yellow confluenceTd" colspan="2" data-highlight-colour="yellow" style="text-align: center;"><p>&lt;target_compare_file&gt;</p><p>ProfileTarget.csv</p><p>(Profile Object extraction from QA)</p></td></tr><tr><th class="highlight-red confluenceTh" data-highlight-colour="red" style="text-align: center;">CustomSettingName</th><th class="highlight-red confluenceTh" data-highlight-colour="red" style="text-align: center;">ProfileId</th><th class="highlight-red confluenceTh" data-highlight-colour="red" style="text-align: center;">Is_Active</th><th class="highlight-red confluenceTh" data-highlight-colour="red" style="text-align: center;">Is_Editable</th><th colspan="1" style="text-align: center;" class="confluenceTh"><br/></th><th class="highlight-blue confluenceTh" colspan="1" data-highlight-colour="blue" style="text-align: center;">ProfileName</th><th class="highlight-blue confluenceTh" colspan="1" data-highlight-colour="blue" style="text-align: center;">ProfileId</th><th colspan="1" style="text-align: center;" class="confluenceTh"><br/></th><th class="highlight-yellow confluenceTh" colspan="1" data-highlight-colour="yellow" style="text-align: center;">ProfileName</th><th class="highlight-yellow confluenceTh" colspan="1" data-highlight-colour="yellow" style="text-align: center;">ProfileId</th></tr><tr><td class="highlight-red confluenceTd" data-highlight-colour="red" style="text-align: center;">OCE__ActivityHistoryUserObjectSelection__c</td><td class="highlight-red confluenceTd" data-highlight-colour="red" style="text-align: center;"><span style="color: rgb(153,51,102);" title=""><strong>a1N0E000000UxlSUAS</strong></span></td><td class="highlight-red confluenceTd" data-highlight-colour="red" style="text-align: center;">Yes</td><td class="highlight-red confluenceTd" data-highlight-colour="red" style="text-align: center;">No</td><td colspan="1" style="text-align: center;" class="confluenceTd"><br/></td><td class="highlight-blue confluenceTd" colspan="1" data-highlight-colour="blue" style="text-align: center;"><span style="color: rgb(51,153,102);"><strong>IQVIA_REP</strong></span></td><td class="highlight-blue confluenceTd" colspan="1" data-highlight-colour="blue" style="text-align: center;"><span style="color: rgb(255,102,0);"><strong>a1N0E000000UxlSUAR</strong></span></td><td colspan="1" style="text-align: center;" class="confluenceTd"><br/></td><td class="highlight-yellow confluenceTd" colspan="1" data-highlight-colour="yellow" style="text-align: center;"><strong><span style="color: rgb(51,153,102);">IQVIA_REP</span></strong></td><td class="highlight-yellow confluenceTd" colspan="1" data-highlight-colour="yellow" style="text-align: center;"><strong><span style="color: rgb(255,0,255);">0051r000007n44xAAA</span></strong></td></tr><tr><td class="highlight-red confluenceTd" data-highlight-colour="red" style="text-align: center;">OCE__ActivityHistoryUserObjectSelection__c</td><td class="highlight-red confluenceTd" data-highlight-colour="red" style="text-align: center;"><span style="color: rgb(255,102,0);" title=""><strong>a1N0E000000UxlSUAR</strong></span></td><td class="highlight-red confluenceTd" data-highlight-colour="red" style="text-align: center;">No</td><td class="highlight-red confluenceTd" data-highlight-colour="red" style="text-align: center;">No</td><td colspan="1" style="text-align: center;" class="confluenceTd"><br/></td><td class="highlight-blue confluenceTd" colspan="1" data-highlight-colour="blue" style="text-align: center;"><strong><span style="color: rgb(0,0,255);">IQVIA_DM</span></strong></td><td class="highlight-blue confluenceTd" colspan="1" data-highlight-colour="blue" style="text-align: center;"><span style="color: rgb(153,51,102);"><strong>a1N0E000000UxlSUAS</strong></span></td><td colspan="1" style="text-align: center;" class="confluenceTd"><br/></td><td class="highlight-yellow confluenceTd" colspan="1" data-highlight-colour="yellow" style="text-align: center;"><span style="color: rgb(0,0,255);"><strong>IQVIA_DM</strong></span></td><td class="highlight-yellow confluenceTd" colspan="1" data-highlight-colour="yellow" style="text-align: center;"><span style="color: rgb(255,0,255);"><strong>0051r000007n44xAAB</strong></span></td></tr></tbody></table></div><p><em><br/></em></p><p><em>If we launch this instrucction:</em></p><div class="code panel pdl" style="border-width: 1px;"><div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;"><b>REPLACE Example Scriptline</b></div><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">FILE|REPLACE|CustomSettingsMigration.csv|ProfileSource.csv|ProfileTarget.csv|ProfileId|ProfileName</pre>
</div></div><p><em>It will replace those QA Ids in the CustomSettingsMigration file:</em></p><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col/><col/><col/><col/></colgroup><tbody><tr><td class="highlight-green confluenceTd" colspan="4" data-highlight-colour="green" style="text-align: center;"><p title="">&lt;replace_file&gt;</p><p title="">CustomSettingsMigration.csv</p><p title="">(Custom Settings extraction ready to be imported in QA)</p></td></tr><tr><th class="highlight-green confluenceTh" data-highlight-colour="green" style="text-align: center;">CustomSettingName</th><th class="highlight-green confluenceTh" data-highlight-colour="green" style="text-align: center;">ProfileId</th><th class="highlight-green confluenceTh" data-highlight-colour="green" style="text-align: center;">Is_Active</th><th class="highlight-green confluenceTh" data-highlight-colour="green" style="text-align: center;">Is_Editable</th></tr><tr><td class="highlight-green confluenceTd" data-highlight-colour="green" style="text-align: center;">OCE__ActivityHistoryUserObjectSelection__c</td><td class="highlight-green confluenceTd" data-highlight-colour="green" style="text-align: center;"><span style="color: rgb(255,0,255);"><strong><span title="">0051r000007n44xAAA</span></strong></span></td><td class="highlight-green confluenceTd" data-highlight-colour="green" style="text-align: center;">Yes</td><td class="highlight-green confluenceTd" data-highlight-colour="green" style="text-align: center;">No</td></tr><tr><td class="highlight-green confluenceTd" data-highlight-colour="green" style="text-align: center;">OCE__ActivityHistoryUserObjectSelection__c</td><td class="highlight-green confluenceTd" data-highlight-colour="green" style="text-align: center;"><span style="color: rgb(255,0,255);"><strong><span title="">0051r000007n44xAAB</span></strong></span></td><td class="highlight-green confluenceTd" data-highlight-colour="green" style="text-align: center;">No</td><td class="highlight-green confluenceTd" data-highlight-colour="green" style="text-align: center;">No</td></tr></tbody></table></div><p><br/></p><p><em>The file is now ready for deploy in the QA environment.</em></p><p><br/></p><h2 id="ScriptingonDTK-COPY:"><strong>COPY:</strong></h2><p>The purpose of this instruction is to copy from column &lt;source_column&gt; of &lt;source_compare_file&gt; to column &lt;target_column&gt; of &lt;result_file&gt;, but only when &lt;match_column&gt; of &lt;source_compare_file&gt; and &lt;target_compare_file&gt; match. &lt;result_file&gt; will be an &quot;updated&quot; &lt;target_compare_file&gt; with the copied data from &lt;source_compare_file&gt;</p><p><br/></p><div class="code panel pdl" style="border-width: 1px;"><div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;"><b>Copy Structure</b></div><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">FILE|COPY|&lt;result_file&gt;|&lt;source_compare_file&gt;|&lt;target_compare_file&gt;|&lt;source_column&gt;|&lt;target_column&gt;|&lt;match_column&gt;</pre>
</div></div><div class="confluence-information-macro confluence-information-macro-information"><p class="title">result_file</p><span class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>&lt;result_file&gt;<strong> can exist or not</strong>, it will be created as a copy of &lt;target_compare_file&gt; with the updated copied values</p></div></div><div class="confluence-information-macro confluence-information-macro-information"><p class="title">Tip</p><span class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>This instruction also accepts multiple &lt;match_column&gt; and &lt;source_column&gt; parameter with &quot;+&quot;, for example:</p><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col/></colgroup><tbody><tr><td class="confluenceTd"><p>FILE|COPY|&lt;result_file&gt;|&lt;source_compare_file&gt;|&lt;target_compare_file&gt;|<span style="color: rgb(255,0,0);"><strong>Name+Type</strong></span>|&lt;target_column&gt;|<span style="color: rgb(255,0,0);"><strong>Id+ProfileId</strong></span></p></td></tr></tbody></table></div><p>This will copy the contents of Name &amp; Type concatenated into rows where the Id and the ProfileId matches at the same time.</p></div></div><p>It may seem a little complex, but for that we will give an applied example:</p><p><br/></p><p><em>The development want to update the OCE__Product__C object data with external ids in their environment, so the management of data is easier and cross-environments.<br/></em></p><p><em>OCE__UniqueIntegrationId__C is empty and is the field they want to update with some value. They are thinking that it would be nice that this external id is generated based on a concatenation of the Name and the OCE__ProductCode__c<br/></em></p><p><em>They extract with this query a csv file containing Product fields. We will call the csv file <br/></em></p><p><br/></p><p><em><br/></em></p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: sql; gutter: false; theme: Confluence" data-theme="Confluence">SELECT Id, Name, OCE__ProductCode__c, OCE__UniqueIntegrationId__c FROM OCE__Product__C</pre>
</div></div><p><br/></p><p><em>In this example case &lt;<strong>source_compare_file</strong>&gt; and &lt;<strong>target_compare_file</strong>&gt; will be the same, because we can get all the info we need from the same object.</em></p><p><em><br/></em></p><div class="table-wrap"><table class="relative-table wrapped confluenceTable" style="width: 91.4857%;"><colgroup><col style="width: 7.1631%;"/><col style="width: 8.89216%;"/><col style="width: 11.762%;"/><col style="width: 1.58378%;"/><col style="width: 6.459%;"/><col style="width: 7.64349%;"/><col style="width: 8.89216%;"/><col style="width: 11.762%;"/><col style="width: 1.55704%;"/><col style="width: 6.459%;"/><col style="width: 7.1631%;"/><col style="width: 8.89216%;"/><col style="width: 11.7585%;"/></colgroup><tbody><tr><td class="highlight-red confluenceTd" colspan="3" data-highlight-colour="red" style="text-align: center;"><p title="">&lt;result_file&gt; </p><p title=""><br/></p><p title="">Product.csv</p><p title="">(can exists, or be created on execution)</p></td><td colspan="1" style="text-align: center;" class="confluenceTd"><br/></td><td class="highlight-blue confluenceTd" colspan="4" data-highlight-colour="blue" style="text-align: center;"><p>&lt;source_compare_file&gt;</p><p>ProductExtract.csv</p><p>(Names extraction from CONFIG)</p></td><td colspan="1" style="text-align: center;" class="confluenceTd"><br/></td><td class="highlight-yellow confluenceTd" colspan="4" data-highlight-colour="yellow" style="text-align: center;"><p>&lt;target_compare_file&gt;</p><p>ProductExtract.csv</p><p>(Profile Object extraction from QA)</p></td></tr><tr><th class="highlight-red confluenceTh" data-highlight-colour="red" style="text-align: center;">Name</th><th class="highlight-red confluenceTh" data-highlight-colour="red" style="text-align: center;">OCE__ProductCode__c</th><th class="highlight-red confluenceTh" colspan="1" data-highlight-colour="red" style="text-align: center;">OCE__UniqueIntegrationId__C</th><th colspan="1" style="text-align: center;" class="confluenceTh"><br/></th><th class="highlight-blue confluenceTh" colspan="1" data-highlight-colour="blue" style="text-align: center;">Id &lt;match_field&gt;</th><th class="highlight-blue confluenceTh" colspan="1" data-highlight-colour="blue" style="text-align: center;"><p><span style="color: rgb(255,102,0);">Name</span></p><p><span style="color: rgb(255,102,0);"> &lt;source_column&gt;</span></p></th><th class="highlight-blue confluenceTh" colspan="1" data-highlight-colour="blue" style="text-align: center;"><p><span style="color: rgb(255,102,0);">OCE__ProductCode__c</span></p><p><span style="color: rgb(255,102,0);">&lt;source_column&gt;</span></p></th><th class="highlight-blue confluenceTh" colspan="1" data-highlight-colour="blue" style="text-align: center;">OCE__UniqueIntegrationId__C</th><th colspan="1" style="text-align: center;" class="confluenceTh"><br/></th><th class="highlight-yellow confluenceTh" colspan="1" data-highlight-colour="yellow" style="text-align: center;"><p>Id</p><p>&lt;match_field&gt;</p></th><th class="highlight-yellow confluenceTh" colspan="1" data-highlight-colour="yellow" style="text-align: center;">Name</th><th class="highlight-yellow confluenceTh" colspan="1" data-highlight-colour="yellow" style="text-align: center;">OCE__ProductCode__c</th><th class="highlight-yellow confluenceTh" colspan="1" data-highlight-colour="yellow" style="text-align: center;"><p><span style="color: rgb(255,0,0);">OCE__UniqueIntegrationId__C</span></p><p><span style="color: rgb(255,0,0);">&lt;target_column&gt;<br/></span></p></th></tr><tr><td class="highlight-red confluenceTd" data-highlight-colour="red" style="text-align: center;"><span style="color: rgb(0,51,102);" title="">POLUTIL</span></td><td class="highlight-red confluenceTd" data-highlight-colour="red" style="text-align: center;">P23</td><td class="highlight-red confluenceTd" colspan="1" data-highlight-colour="red" style="text-align: center;"><br/></td><td colspan="1" style="text-align: center;" class="confluenceTd"><br/></td><td class="highlight-blue confluenceTd" colspan="1" data-highlight-colour="blue" style="text-align: center;"><span style="color: rgb(51,153,102);"><strong>52342431</strong></span></td><td class="highlight-blue confluenceTd" colspan="1" data-highlight-colour="blue" style="text-align: center;"><span style="color: rgb(255,102,0);"><strong>POLUTIL</strong></span></td><td class="highlight-blue confluenceTd" colspan="1" data-highlight-colour="blue" style="text-align: center;"><span style="color: rgb(255,102,0);"><strong>P23</strong></span></td><td class="highlight-blue confluenceTd" colspan="1" data-highlight-colour="blue" style="text-align: center;"><br/></td><td colspan="1" style="text-align: center;" class="confluenceTd"><br/></td><td class="highlight-yellow confluenceTd" colspan="1" data-highlight-colour="yellow" style="text-align: center;"><strong><span style="color: rgb(51,153,102);"><span style="color: rgb(51,153,102);">52342431</span></span></strong></td><td class="highlight-yellow confluenceTd" colspan="1" data-highlight-colour="yellow" style="text-align: center;"><span style="color: rgb(0,51,102);">POLUTIL</span></td><td class="highlight-yellow confluenceTd" colspan="1" data-highlight-colour="yellow" style="text-align: center;">P23</td><td class="highlight-yellow confluenceTd" colspan="1" data-highlight-colour="yellow" style="text-align: center;"><br/></td></tr><tr><td class="highlight-red confluenceTd" data-highlight-colour="red" style="text-align: center;"><span style="color: rgb(0,51,102);" title="">XENOMORPHINE</span></td><td class="highlight-red confluenceTd" data-highlight-colour="red" style="text-align: center;">X17</td><td class="highlight-red confluenceTd" colspan="1" data-highlight-colour="red" style="text-align: center;"><br/></td><td colspan="1" style="text-align: center;" class="confluenceTd"><br/></td><td class="highlight-blue confluenceTd" colspan="1" data-highlight-colour="blue" style="text-align: center;"><strong><span style="color: rgb(0,0,255);">54311234</span></strong></td><td class="highlight-blue confluenceTd" colspan="1" data-highlight-colour="blue" style="text-align: center;"><span style="color: rgb(255,102,0);"><strong>XENOMORPHINE</strong></span></td><td class="highlight-blue confluenceTd" colspan="1" data-highlight-colour="blue" style="text-align: center;"><span style="color: rgb(255,102,0);"><strong>X17</strong></span></td><td class="highlight-blue confluenceTd" colspan="1" data-highlight-colour="blue" style="text-align: center;"><br/></td><td colspan="1" style="text-align: center;" class="confluenceTd"><br/></td><td class="highlight-yellow confluenceTd" colspan="1" data-highlight-colour="yellow" style="text-align: center;"><strong><span style="color: rgb(0,0,255);"><span style="color: rgb(0,0,255);">54311234</span></span></strong></td><td class="highlight-yellow confluenceTd" colspan="1" data-highlight-colour="yellow" style="text-align: center;"><span style="color: rgb(0,51,102);">XENOMORPHINE</span></td><td class="highlight-yellow confluenceTd" colspan="1" data-highlight-colour="yellow" style="text-align: center;">X17</td><td class="highlight-yellow confluenceTd" colspan="1" data-highlight-colour="yellow" style="text-align: center;"><br/></td></tr></tbody></table></div><p><em>If we launch this script line:</em></p><div class="code panel pdl" style="border-width: 1px;"><div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;"><b>COPY Example Scriptline</b></div><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">FILE|COPY|Product.csv|ProductExtract.csv|ProductExtract.csv|Name+OCE__ProductCode__c|OCE__UniqueIntegrationID__c|Id</pre>
</div></div><p><em><br/></em></p><p><em>The &lt;result_file&gt; after execution appears as:</em></p><div class="table-wrap"><table class="relative-table wrapped confluenceTable" style="width: 25.4222%;"><colgroup><col style="width: 25.75%;"/><col style="width: 31.9776%;"/><col style="width: 42.2853%;"/></colgroup><tbody><tr><td class="highlight-green confluenceTd" colspan="3" data-highlight-colour="green" style="text-align: center;" title="Color de fondo: Verde"><p title="">&lt;result_file&gt;</p><p title="">Product.csv</p><p title="">(can exists, or be created on execution)</p></td></tr><tr><th class="highlight-green confluenceTh" data-highlight-colour="green" style="text-align: center;" title="Color de fondo: Verde">Name</th><th class="highlight-green confluenceTh" data-highlight-colour="green" style="text-align: center;" title="Color de fondo: Verde">OCE__ProductCode__c</th><th class="highlight-green confluenceTh" colspan="1" data-highlight-colour="green" style="text-align: center;" title="Color de fondo: Verde">OCE__UniqueIntegrationId__C</th></tr><tr><td class="highlight-green confluenceTd" data-highlight-colour="green" style="text-align: center;" title="Color de fondo: Verde"><span style="color: rgb(0,51,102);" title="">POLUTIL</span></td><td class="highlight-green confluenceTd" data-highlight-colour="green" style="text-align: center;" title="Color de fondo: Verde">P23</td><td class="highlight-green confluenceTd" colspan="1" data-highlight-colour="green" style="text-align: center;" title="Color de fondo: Verde"><span style="color: rgb(255,0,255);"><strong>POLUTIL_P23</strong></span></td></tr><tr><td class="highlight-green confluenceTd" data-highlight-colour="green" style="text-align: center;" title="Color de fondo: Verde"><span style="color: rgb(0,51,102);" title="">XENOMORPHINE</span></td><td class="highlight-green confluenceTd" data-highlight-colour="green" style="text-align: center;" title="Color de fondo: Verde">X17</td><td class="highlight-green confluenceTd" colspan="1" data-highlight-colour="green" style="text-align: center;" title="Color de fondo: Verde"><span style="color: rgb(255,0,255);"><strong>XENOMORPHINE_X17</strong></span></td></tr></tbody></table></div><p><br/></p><p><em>The file is updated with an external Id now.</em></p><p><br/></p><h2 id="ScriptingonDTK-2.DataProcessing:"><strong>2. Data Processing:</strong></h2><h2 id="ScriptingonDTK-"><strong><br/></strong></h2><h2 id="ScriptingonDTK-SOQLQUERY:"><strong>SOQLQUERY:</strong></h2><p>The purpose of this instruction is to query a Salesforce environment and copy that data into a csv file.</p><p>This queries have to be in Salesforce SOQL language, and it is susceptible to it's limitations. More information can be found here: <a class="external-link" href="https://developer.salesforce.com/docs/atlas.en-us.soql_sosl.meta/soql_sosl/" rel="nofollow">SOQL Documentation</a></p><p><br/></p><p>Format will be delimited by comma, with double quotes when it is necesary.</p><p><br/></p><div class="code panel pdl" style="border-width: 1px;"><div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;"><b>SOQLQUERY Structure</b></div><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">SOURCE/TARGET|SOQLQUERY|&lt;soql_query&gt;|&lt;file_name&gt;</pre>
</div></div><p><br/></p><p>SOURCE/TARGET will determine the sandbox where the query will be executed.</p><p><br/></p><div class="confluence-information-macro confluence-information-macro-information"><p class="title">result_file</p><span class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>&lt;soql_query&gt; has to be between double quotes.</p></div></div><p><br/></p><p>An example would be the following:</p><p><em>Dev team wants to extract OCE__Rating__c object to compare it to a file they are maintaining with the correct ratings.</em></p><p><br/></p><div class="code panel pdl" style="border-width: 1px;"><div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;"><b>SOQLQUERY Example Scriptline</b></div><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">SOURCE|SOQLQUERY|&quot;select, Name, OCE__FieldName__c, OCE__JsonData__c, OCE__JsonMetadata__c, OCE__Label__c, OCE__UniqueIntegrationID__c from OCE__Rating__c&quot;|Rating.csv</pre>
</div></div><p><br/></p><p><em>After executing this scriptline a <strong>Rating.csv</strong> file will be created with this query data from SOURCE environment</em></p><h2 id="ScriptingonDTK-.1"><strong><br/></strong></h2><h2 id="ScriptingonDTK-BULKDELETE:"><strong>BULKDELETE:</strong></h2><p>ThIs instructions make possible the bulk delete of records in a Salesforce environment.</p><p>The file must be a CSV file with only one column: &quot;Id&quot;.</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;"><b>BULKDELETE Structure</b></div><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">SOURCE/TARGET|BULKDELETE|&lt;sobject_name&gt;|&lt;file_name&gt;|&lt;wait_time&gt;</pre>
</div></div><p>&lt;sobject_name&gt; should be filled with the complete sobject name.</p><p>&lt;wait_time&gt; let's the user choose the time in minutes that console is going to wait for the process to finish. As the DTK scripting language is going to execute line by line we recommend introducing a time that would last longer than the estimate execution. As soon as the process is finished the console will unlock regardless of the resting waiting time, and will continue with the next execution.</p><p><br/></p><p>Example BULKDELETE csv file:</p><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col/></colgroup><tbody><tr><th class="confluenceTh">Id</th></tr><tr><td class="confluenceTd">lñkfa091u32okjñlka</td></tr><tr><td colspan="1" class="confluenceTd">lkasjdf01po3kj4ñañ</td></tr><tr><td colspan="1" class="confluenceTd">oaksjd02lsldkfjañlk</td></tr><tr><td colspan="1" class="confluenceTd">a09dfjñ1lkdñalksdf</td></tr></tbody></table></div><p>An example execution can be:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;"><b>BULKDELETE Example Scriptline</b></div><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">TARGET|BULKDELETE|OCE__CustomSettingsMigration__c|CustomSettingsToDelete.csv|3</pre>
</div></div><h2 id="ScriptingonDTK-.2"><strong><br/></strong></h2><h2 id="ScriptingonDTK-.3"><strong><br/></strong></h2><h2 id="ScriptingonDTK-BULKUPSERT:"><strong>BULKUPSERT:</strong></h2><p>ThIs instruction make possible the bulk upsert of records in a Salesforce environment.</p><p><br/></p><div class="code panel pdl" style="border-width: 1px;"><div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;"><b>BULKUPSERT Structure</b></div><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">SOURCE/TARGET|BULKUPSERT|&lt;sobject_name&gt;|&lt;file_name&gt;|&lt;id_column&gt;|&lt;wait_time&gt;</pre>
</div></div><p>&lt;sobject_name&gt; should be filled with the complete sobject name.</p><p>&lt;id_column&gt; the column name of the external ID.</p><p>&lt;wait_time&gt; let's the user choose the time in minutes that console is going to wait for the process to finish. As the DTK scripting language is going to execute line by line we recommend introducing a time that would last longer than the estimate execution. As soon as the process is finished the console will unlock regardless of the resting waiting time, and will continue with the next execution.</p><p><br/></p><p>Example BULKUPSERT csv file:</p><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col/><col/><col/><col/></colgroup><tbody><tr><th class="confluenceTh">Id</th><th colspan="1" class="confluenceTh">Name</th><th colspan="1" class="confluenceTh">Type</th><th colspan="1" class="confluenceTh">OCE__UniqueIntegrationId__c</th></tr><tr><td class="confluenceTd">lñkfa091u32okjñlka</td><td colspan="1" class="confluenceTd">Test 1</td><td colspan="1" class="confluenceTd">A</td><td colspan="1" class="confluenceTd">TEST1</td></tr><tr><td colspan="1" class="confluenceTd">lkasjdf01po3kj4ñañ</td><td colspan="1" class="confluenceTd">Test 2</td><td colspan="1" class="confluenceTd">B</td><td colspan="1" class="confluenceTd">TEST2</td></tr><tr><td colspan="1" class="confluenceTd">oaksjd02lsldkfjañlk</td><td colspan="1" class="confluenceTd">Test 3</td><td colspan="1" class="confluenceTd">C</td><td colspan="1" class="confluenceTd">TEST3</td></tr><tr><td colspan="1" class="confluenceTd">a09dfjñ1lkdñalksdf</td><td colspan="1" class="confluenceTd">Test 4</td><td colspan="1" class="confluenceTd">D</td><td colspan="1" class="confluenceTd"><p>TEST4</p></td></tr></tbody></table></div><p>An example execution can be:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;"><b>BULKUPSERT Example Scriptline</b></div><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">TARGET|BULKUPSERT|TestObject__c|TestData.csv|OCE__UniqueIntegrationId__c|3</pre>
</div></div><p><br/></p><h2 id="ScriptingonDTK-RECORDCREATE/RECORDDELETE/RECORDUPDATE:"><strong>RECORDCREATE / RECORDDELETE / RECORDUPDATE:</strong></h2><p>Coming soon. Meanwhile BULKUPSERT &amp; BULKDELETE can be used instead.</p><p><strong><br/></strong></p><h2 id="ScriptingonDTK-3.Other"><strong>3. Other</strong></h2><h2 id="ScriptingonDTK-.4"><strong><br/></strong></h2><h2 id="ScriptingonDTK-APEXEXECUTE:"><strong>APEXEXECUTE:</strong></h2><p>ThIs instruction make possible the execution of apex code from a local file.</p><p>Apex executions will ocur sequencially.</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;"><b>APEXEXECUTE Structure</b></div><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">SOURCE/TARGET|APEXEXECUTE|&lt;file&gt;</pre>
</div></div><p>An example execution<strong>:<br/></strong></p><div class="code panel pdl" style="border-width: 1px;"><div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;"><b>APEXEXECUTE Example Scriptline</b></div><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">TARGET|APEXEXECUTE|{gitroot}apexscript\AccountFilterScript.apex</pre>
</div></div><p><strong><br/></strong></p><h2 id="ScriptingonDTK-DEPLOYZIP:"><strong>DEPLOYZIP:</strong></h2><p>Coming soon.</p><p><br/></p>
                    </div>

                    
                 
                </div>             </div> 
        </div>     </body>
</html>
